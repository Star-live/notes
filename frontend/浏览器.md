## 面试常见问题
### 1. 在地址栏里输入一个URL，到这个页面呈现出来，中间会发生什么？
答：
- 输入URL后，首先需要找到这个URL域名的服务器IP。为了寻找这个IP，浏览器会首先寻找缓存，查看缓存中是否有记录，缓存的查找记录为：浏览器缓存->系统缓存->路由器缓存，缓存中没有则查找系统的hosts文件中是否有记录，如果没有则查询DNS服务器，得到服务器的IP地址。
- 然后，浏览器会根据这个IP地址以及相应地端口号，构造一个HTTP请求，这个请求报文会包括这次请求的信息，主要是请求方法、请求说明和请求附带的数据，并将这个http请求封装在一个TCP包中，这个TCP包会依次经过传输层、网络层、数据链路层、物理层到达服务器。
- 服务器解析这个请求来做出响应，返回相应的HTML给浏览器。
- 因为HTML是一个树形结构，浏览器根据这个HTML来构建DOM树，在DOM树的构建过程中如果遇到JS脚本和外部JS连接，则会停止构建DOM树来执行和下载相应的代码，这会造成阻塞，这就是为什么推荐JS代码应该放在HTML代码的后面。
- 之后根据外部样式、内部样式、内联样式构建一个CSS对象模型树CSSOM树
- 构建完成后和DOM树合并为渲染树，这里主要做的是排除非视觉节点，比如script，meta标签和排除display为none的结点。
- 之后进行布局，布局主要是确定各个元素的位置和尺寸
-之后是渲染页面，因为HTML文件会含有图片、视频、音频等资源，在解析DOM的过程中，遇到这些都会进行并行下载，浏览器对每个域的并行下载数量有一定的限制，一般是4-6个
- 当然在这些所有的请求中我们还需要关注的就是缓存，缓存一般通过Cache-Control、Last-Modify、Expires等首部字段控制。Cache-Control和Expires的区别在于Cache-Control使用相对时间，Expires使用基于服务器端的绝对时间，因为存在时差问题，一般采用Cache-Control，在请求这些有设置了缓存的数据时，会先查看是否过期，如果没有过期则会直接使用本地缓存，过期则请求并在服务器校验文件是否修改，如果上一次响应设置了ETag值会在这次请求的时候作为If-None-Match的值交给服务器校验，如果一致，继续校验Last-Modified，没有设置ETag则直接验证Last-Modified，再决定是否返回304。

简洁来说可以分为以下6个步骤：
1. DNS解析
2. TCP连接
3. 发送HTTP请求
4. 服务器处理请求并返回HTTP报文
5. 浏览器解析渲染页面
6. 连接结束

### 2. HTTP状态码
- 200，OK，请求成功。一般用于GET与POST请求。
- 201，Created，已创建。成功请求并创建了新的资源。
- 202，Accepted，已接受。已经接受请求，但未处理完成。
- 203，Non-Authoritative Information，非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本。
- 204，No Content，无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前的文档。
- 205，Reset Content，重置内容。服务器处理成功，用户终端（浏览器）应重置文档视图。可通过此返回码清除浏览器的表单域。
- 206，Partial Content，部分内容。服务器成功处理了部分GET请求。
- 300，Multiple Choices，多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（浏览器）选择
- 301，Moved Permanently，永久移动。请求的资源已被永久的移动到新URL，返回信息会包括新的URL，浏览器会自动定向到新的URL。今后任何新的请求都应使用新的URL代替。
- 302，Found，临时移动。与301类似，但资源只是临时被移动，客户端应继续使用原有URL。可能出现在用户未登录访问内容时被跳转到用户登录界面。
- 303，See Other，查看其他地址。与301类似，使用GET和POST请求查看。
- 304，Not Modified，未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源，客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源
- 305，Use Proxy，使用代理。所请求的资源必须通过代理访问。
- 306，Unused，已经被废弃的HTTP状态码。
- 307，Temporary Redirect，临时重定向。与302类似。使用GET请求重定向。
- 400，Bad Request，客户端请求的语法错误，服务器无法理解。
- 401，Unauthorized，请求要求用户的身份认证。
- 402，Payment Required，保留，将来使用。
- 403，Forbidden，服务器理解客户端的请求，但是拒绝执行此请求。
- 404，Not Found，服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人眼可设置“您所请求的资源无法找到”的个性页面。
- 500，Internal Server Error，服务器内部错误，无法完成请求。
- 501， Not Implemented，服务器不支持请求的功能，无法完成请求。
- 502， Bad Gateway，作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效地响应。
- 503，Service Unavailable，由于超载或系统维护，服务器暂时无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中。
- 504，Gateway Time-out，充当网关或代理的服务器，未及时从远端服务器获取请求。
- 505,HTTP Version not supported，服务器不支持请求的HTTP协议的版本，无法完成处理。

### 3. cookie和session的区别
答：
1. cookie数据存放在客户的浏览器上，session数据存放在服务器上。
2. cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑到安全应当使用session。
3. session会在一定时间内保存在服务器上。当访问增多，会比较占用服务器的性能，考虑减轻服务器性能方面，应当使用COOKIE。
4. 单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。

### 4. cookie有哪些字段可以设置
- `name`字段为一个cookie的名称
- value字段为一个cookie的值
- domain字段为可以访问此cookie的域名。
    - 非顶级域名，设置cookie的domain只能为顶级域名或者二级域名、三级域名本身，不能设置其他二级域名的cookie，否则无法生成。
    - 顶级域名只能设置domain为顶级域名。
    - 二级域名能读取设置domain为顶级域名或自身的cookie。所以想要cookie在多个二级域名中共享，需要设置domain为顶级域名。
    - 顶级域名只能获取到domain设置为顶级域名的cookie。
- path字段为可以访问此cookie的页面路径，比如domain是abc.com，path是/test，那么只有/test路径下的页面可以读取到此cookie。
- expires/Max-Age字段为此cookie超时时间。若设置其值为一个时间，那么到达此时间后，此cookie失效。不设置的话默认值是Session，意思是cookie会和session一起失效。当浏览器关闭（不是浏览器标签页，而是整个浏览器），此cookie失效
- Size字段，此cookie大小
- http字段，cookie的httponly属性。若此属性为true，则只有在http请求头中会带有此cookie的信息，而不能通过document.cookie来访问此cookie。
- secure字段，设置是否只能通过https来传递此条cookie。